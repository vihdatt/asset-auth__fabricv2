{"ast":null,"code":"import _slicedToArray from \"/home/tien/fabric-samples/asset-auth-network/BasicNetwork-2.0/asset-authorize/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/tien/fabric-samples/asset-auth-network/BasicNetwork-2.0/asset-authorize/src/components/Table/QueryAllAssetTable.js\";\n\nimport React, { useState } from 'react';\nimport { Button, Table } from 'react-bootstrap';\nimport APIClient from '../../api/APIClient';\nimport ChangeAsset from '../Modal/ChangeAsset';\n\nvar QueryAllAssetTable = function QueryAllAssetTable(_ref) {\n  var data = _ref.data,\n      setData = _ref.setData;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      showChangeModal = _useState2[0],\n      setShowChangeModal = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      keyChange = _useState4[0],\n      setKeyChange = _useState4[1];\n\n  var handleDelete = function handleDelete(key) {\n    APIClient.deleteAnAsset({\n      args: [key]\n    }).then(function (rs) {\n      if (rs.data.error == null) {\n        alert('Delete successfully!');\n        window.open('/', '_self');\n      } else {\n        alert('Delete failed!');\n      }\n    });\n  };\n\n  var handleShowHistory = function handleShowHistory(asset) {\n    APIClient.getHistoryanAsset({\n      args: \"[\\\"\".concat(asset, \"\\\"]\"),\n      peer: 'peer0.gov.assetauth.vn',\n      fcn: 'getHistoryForAsset'\n    }).then(function (rs) {\n      setData({\n        data: rs.data,\n        name: 'history asset',\n        asset: asset\n      });\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"all-asset-table\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    striped: true,\n    bordered: true,\n    hover: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 25\n    }\n  }, \"Key\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 25\n    }\n  }, \"Manufacturer\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 25\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 25\n    }\n  }, \"Serial number\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 25\n    }\n  }, \"Owner ID\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 25\n    }\n  }, \"Owner name\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 25\n    }\n  }, \"Register date\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 25\n    }\n  }, \"Last update date\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 17\n    }\n  }, data.map(function (_data, index) {\n    if (_data.Record.isdelete == false) return /*#__PURE__*/React.createElement(\"tr\", {\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 33\n      }\n    }, _data.Key), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 33\n      }\n    }, _data.Record.manufacturer), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 33\n      }\n    }, _data.Record.name), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 33\n      }\n    }, _data.Record.serialnumber), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 33\n      }\n    }, _data.Record.ownerid), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 33\n      }\n    }, _data.Record.ownername), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 33\n      }\n    }, _data.Record.registerdate), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 33\n      }\n    }, _data.Record.lastupdatedate), /*#__PURE__*/React.createElement(\"td\", {\n      style: {\n        display: 'flex'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      className: \"option\",\n      variant: \"danger\",\n      onClick: function onClick() {\n        return handleDelete(_data.Key);\n      },\n      size: \"sm\",\n      style: {\n        marginRight: '5px'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 37\n      }\n    }, \"Delete\"), /*#__PURE__*/React.createElement(Button, {\n      className: \"option\",\n      variant: \"info\",\n      size: \"sm\",\n      onClick: function onClick() {\n        setKeyChange(_data.Key);\n        setShowChangeModal(true);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 37\n      }\n    }, \"EDIT\"), /*#__PURE__*/React.createElement(Button, {\n      className: \"option\",\n      variant: \"info\",\n      size: \"sm\",\n      onClick: function onClick() {\n        handleShowHistory(_data.Key);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 37\n      }\n    }, \"History\")));\n  }))), /*#__PURE__*/React.createElement(ChangeAsset, {\n    show: showChangeModal,\n    handleClose: function handleClose() {\n      return setShowChangeModal(false);\n    },\n    asset: keyChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }));\n};\n\nexport default QueryAllAssetTable;","map":{"version":3,"names":["React","useState","Button","Table","APIClient","ChangeAsset","QueryAllAssetTable","data","setData","showChangeModal","setShowChangeModal","keyChange","setKeyChange","handleDelete","key","deleteAnAsset","args","then","rs","error","alert","window","open","handleShowHistory","asset","getHistoryanAsset","peer","fcn","name","map","_data","index","Record","isdelete","Key","manufacturer","serialnumber","ownerid","ownername","registerdate","lastupdatedate","display","marginRight"],"sources":["/home/tien/fabric-samples/asset-auth-network/BasicNetwork-2.0/asset-authorize/src/components/Table/QueryAllAssetTable.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Button, Table } from 'react-bootstrap';\nimport APIClient from '../../api/APIClient';\nimport ChangeAsset from '../Modal/ChangeAsset';\n\nconst QueryAllAssetTable = ({ data, setData }) => {\n    const [showChangeModal, setShowChangeModal] = useState(false)\n    const [keyChange, setKeyChange] = useState('')\n    const handleDelete = (key) => {\n        APIClient.deleteAnAsset({\n            args: [key]\n        }).then((rs) => {\n            if(rs.data.error == null){\n                alert('Delete successfully!')\n                window.open('/', '_self')\n            }else{\n                alert('Delete failed!')\n            }\n        })\n    }\n    const handleShowHistory = (asset) => {\n        APIClient.getHistoryanAsset({\n            args:  `[\"${asset}\"]`,\n            peer: 'peer0.gov.assetauth.vn',\n            fcn: 'getHistoryForAsset'\n        }).then((rs) => {\n            setData({\n                data: rs.data,\n                name:'history asset',\n                asset: asset\n            })\n        })\n    }\n    return (\n        <div className='all-asset-table'>\n            <Table striped bordered hover>\n                <thead>\n                    <tr>\n                        <th>Key</th>\n                        <th>Manufacturer</th>\n                        <th>Name</th>\n                        <th>Serial number</th>\n                        <th>Owner ID</th>\n                        <th>Owner name</th>\n                        <th>Register date</th>\n                        <th>Last update date</th>\n                        <th></th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {\n                        data.map((_data, index) => {\n                           if( _data.Record.isdelete == false)\n                            return(\n                                <tr key={index}>\n                                <td>{_data.Key}</td>\n                                <td>{_data.Record.manufacturer}</td>\n                                <td>{_data.Record.name}</td>\n                                <td>{_data.Record.serialnumber}</td>\n                                <td>{_data.Record.ownerid}</td>\n                                <td>{_data.Record.ownername}</td>\n                                <td>{_data.Record.registerdate}</td>\n                                <td>{_data.Record.lastupdatedate}</td>\n                                <td style={{display:'flex'}}>\n                                    <Button className='option' variant=\"danger\" onClick={() => handleDelete(_data.Key)} size=\"sm\" style={{marginRight:'5px'}}>Delete</Button>\n                                    <Button className='option' variant=\"info\" size=\"sm\" onClick={() =>{\n                                        setKeyChange(_data.Key)\n                                        setShowChangeModal(true)\n                                    }}>EDIT</Button>\n                                    <Button className='option' variant=\"info\" size=\"sm\" onClick={() =>{\n                                        handleShowHistory(_data.Key)\n                                    }}>History</Button>\n                                </td>\n                            </tr>\n                            )\n                        })\n                    }\n                </tbody>\n            </Table>\n            <ChangeAsset show={showChangeModal} handleClose={()=>setShowChangeModal(false)} asset={keyChange}/>\n        </div>\n    );\n};\n\nexport default QueryAllAssetTable;"],"mappings":"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"},"metadata":{},"sourceType":"module"}